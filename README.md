This Python script provides a user-friendly command-line interface for downloading YouTube videos and playlists. It simplifies the download process by automatically installing necessary dependencies (`yt-dlp`, `colorama`, `psutil`) and offering clear, colored prompts for user input.

**Key Features:**

*   **Effortless Downloads**: Download single YouTube videos or entire playlists with ease.
*   **Automatic Dependency Management**: No manual installation of Python libraries required; the script handles it.
*   **Customizable Output**: Choose your preferred download directory. Defaults to your current working directory or the system's 'Downloads' folder on Windows.
*   **Interactive Progress Bar**: Monitor download status with a dynamic progress bar, showing download speed, estimated time remaining, downloaded size, and overall progress for playlists.
*   **Video Information Display**: Get a quick overview of the video title and duration before initiating the download.
*   **Robust Error Handling**: Provides informative messages for invalid URLs or network issues.

*   **Faster Playlist Handling**: Optionally use a flat extraction mode to quickly list playlist entries and download them in parallel.

*   **Avoid Duplicate Downloads**: Before downloading, the script checks whether the target output file already exists on disk; if so and the file size is > 0, the video is skipped to avoid duplicates. To force a re-download, answer 'y' to the force prompt.

How duplicate detection works:
- The script checks the expected output filename generated by yt-dlp and skips downloading if the file already exists and is non-empty.
- If you want to force a re-download regardless of existing files, answer 'y' to the prompt.
 - The script checks the expected output filename generated by yt-dlp and also scans the download folder for files with the same normalized filename base (it ignores extensions and trailing index suffixes like `_1` or `(1)`). If any matching file exists and is non-empty, the video will be skipped.
 - If you want to force a re-download regardless of existing files, answer 'y' to the prompt or pass `--force`.

CLI usage for simple download:
```
python youtube_downloader.py --dir /path/to/downloads
```

Info timeout
- If fetching video info hangs or takes long (network issues or playlist parsing), you can configure the initial info fetch timeout using `--info-timeout`. If the script times out it will prompt whether to keep waiting and extend the timeout.

Audio vs Video options
- During interactive usage, the script asks whether you want to download audio-only or video + audio. If you choose audio-only, you can optionally convert the audio to MP3 (requires ffmpeg on your system).
- Non-interactive CLI flags are available:
	- `--audio` : download audio-only
	- `--video` : download video + audio
	- `--quality` : set desired video quality (choices: `best`, `1080`, `720`, `480`, `360`, `low`)
	- `--convert-mp3` : when `--audio` is used, convert to mp3 (requires ffmpeg)
	 - `--convert-mp3` : when `--audio` is used, convert to mp3 (requires ffmpeg)
	 - `--force` : force re-download even if the target file already exists on disk
	 - `--subtitles` : download subtitles if available
	 - `--autosub` : download automatically generated subtitles (when available)
	 - `--sub-lang` : comma-separated list of subtitle language codes (e.g., 'en' or 'en,es')
		- `--embed-subtitles` : when used with `--subtitles`, embed the subtitles into the downloaded video (requires ffmpeg)

	Playlist behavior
	- For playlist downloads the filename template includes an index suffix (e.g., `%(title)s_1.%(ext)s`) so entries aren't overwritten.
	- Duplicate checking considers playlist index suffixes as significant â€” the script will not treat entries with different indices as duplicates.

Performance & concurrency
- Use `--extract-flat` to perform a faster, lightweight playlist listing (fewer metadata calls). This speeds up large playlists by avoiding full metadata fetch for every entry up-front.
- Use `--concurrency N` to download up to `N` playlist entries in parallel (default `1`). Be mindful of network limits and rate-limiting from the source; start with small values like `2` or `4`.

Examples (performance):
```
# Fast playlist listing and sequential downloads
python youtube_downloader.py --dir ./downloads --extract-flat

# Fast listing + 4 parallel downloads
python youtube_downloader.py --dir ./downloads --extract-flat --concurrency 4
```

Examples:
```
# Download entire playlist (interactive prompts) into ./downloads
python youtube_downloader.py --dir ./downloads

# Non-interactive: download audio-only and convert to mp3
python youtube_downloader.py --dir ./downloads --audio --convert-mp3

# Non-interactive: download video at 720p
python youtube_downloader.py --dir ./downloads --video --quality 720
```

Progress reporting
- The script prints a download progress bar while files are being downloaded.
- For playlists, after each video finishes (or is skipped), a brief progress summary is shown which indicates how many videos are completed and how many remain.
 - For playlists, after each video finishes (or is skipped/failed), a brief progress summary is shown which indicates how many videos are completed and how many remain.
- For single downloads a concise summary is shown upon completion.

Whether you need to save a single video or an entire series, this tool offers a straightforward and efficient solution.